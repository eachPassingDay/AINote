# DashScope API Configuration
spring.ai.dashscope.api-key=${DASHSCOPE_API_KEY:}

# Embedding Configuration
spring.ai.dashscope.embedding.enabled=true
spring.ai.dashscope.embedding.options.model=text-embedding-v1

# Rerank Configuration
spring.ai.dashscope.rerank.enabled=true
spring.ai.dashscope.rerank.options.model=gte-rerank

# ==========================================
# 数据库连接配置 (对应你 Docker 命令里的参数)
# ==========================================
spring.datasource.url=jdbc:postgresql://localhost:5432/postgres
spring.datasource.username=postgres
spring.datasource.password=secret
spring.datasource.driver-class-name=org.postgresql.Driver

# ==========================================
# Spring AI PGVector 配置
# ==========================================
# 自动初始化表结构 (第一次运行时必须为 true，它会自动创建 vector_store 表)
spring.ai.vectorstore.pgvector.initialize-schema=true

# 向量维度。通义千问 (text-embedding-v1/v2) 通常是 1536。
# 如果报错 "dimensions mismatch"，请确认你使用的具体模型维度。
spring.ai.vectorstore.pgvector.dimension=1536

# 索引类型。HNSW 是目前最快的近似检索算法，适合生产环境。
spring.ai.vectorstore.pgvector.index-type=HNSW

# 移除距离。COSINE (余弦相似度) 是文本检索最常用的。
spring.ai.vectorstore.pgvector.distance-type=COSINE_DISTANCE

# ==========================================
# JPA Configuration
# ==========================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.open-in-view=false
